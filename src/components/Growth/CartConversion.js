import { motion } from "framer-motion";
import Image from "next/image";
import CountUp from "react-countup";
import GrowthVector from "../../../public/Images/growth-vector.svg";
import styles from "./Cart.module.css";
import ScrollTrigger from "react-scroll-trigger";
import { useState } from "react";

const CartConversion = () => {
	const [counterOn, setCounterOn] = useState(false);
	return (
		<ScrollTrigger
			onEnter={() => setCounterOn(true)}
			onExit={() => setCounterOn(false)}
		>
			<div className="flex flex-row bg-white rounded-xl w-96 p-4 gap-1 items-center">
				<div className="flex flex-col gap-5">
					<h6 className="text-brandBlue"> Cart Conversion Ratio</h6>
					<h5 className="font-semibold">
						{counterOn && <CountUp end={84} duration={2} />}%{" "}
					</h5>
					<div className="flex flex-row gap-3 items-center">
						<h6>%ROI</h6>
						<div className="bg-[#E7FFEB] flex flex-row w-fit px-4 py-2 rounded-2xl">
							<Image src={GrowthVector} alt="growth-vector" />
							<h6>+{counterOn && <CountUp end={88} duration={2} />}%</h6>
						</div>
					</div>
				</div>

				<div>
					<svg
						width="153"
						height="81"
						viewBox="0 0 153 81"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						{counterOn && (
							<path
								className={styles.draw}
								opacity="0.4"
								d="M19.299 62.421C12.4602 62.421 6.21607 66.1207 0.814453 80.3175H152.21V15.2498C145.651 15.2498 139.424 27.2738 132.46 27.2738C126.044 27.2738 124.214 34.7323 121.584 34.7323C119.205 34.7323 118.016 33.1316 116.232 33.1316C114.448 33.1316 114.448 41.456 110.88 41.456C108.501 41.456 106.122 38.9895 102.257 38.9895C98.3913 38.9895 95.9911 45.7723 92.7419 45.7723C84.119 45.7723 87.9845 31.8984 82.335 31.8984C77.5776 31.8984 76.6856 40.2227 71.3334 40.2227C64.4946 40.2227 66.2787 28.8153 61.8186 28.8153C56.1691 28.8153 59.4409 48.2388 50.2223 48.2388C42.7888 48.2388 42.3275 54.3645 38.3288 54.4049C34.33 54.4454 30.3006 50.7166 26.7325 50.7166C21.3804 50.7166 25.2458 62.421 19.299 62.421Z"
								fill="url(#paint0_linear_498_7167)"
							/>
						)}

						<motion.g>
							<motion.path
								id="motionPath"
								d="M0.814453 80.3175C6.21607 66.1207 12.4602 62.421 19.299 62.421C25.2458 62.421 21.3804 50.7166 26.7325 50.7166C30.3006 50.7166 34.33 54.4454 38.3288 54.4049C42.3275 54.3645 42.7888 48.2388 50.2223 48.2388C59.4409 48.2388 56.1691 28.8153 61.8186 28.8153C66.2787 28.8153 64.4946 40.2227 71.3334 40.2227C76.6856 40.2227 77.5776 31.8984 82.335 31.8984C87.9845 31.8984 84.119 45.7723 92.7419 45.7723C95.9911 45.7723 98.3913 38.9895 102.257 38.9895C106.122 38.9895 108.501 41.456 110.88 41.456C114.448 41.456 114.448 33.1316 116.232 33.1316C118.016 33.1316 119.205 34.7323 121.584 34.7323C124.214 34.7323 126.044 27.2738 132.46 27.2738C139.424 27.2738 145.651 15.2498 152.21 15.2498M0.814453 80.3175"
								stroke="#6241D4"
								stroke-width="1.28847"
								stroke-linecap="round"
								stroke-linejoin="round"
								initial={{ pathLength: 0 }}
								animate={{ pathLength: 1 }}
								transition={{
									duration: 5,
									ease: "linear",
									repeat: Infinity,
								}}
							/>

							<g>
								<rect
									x="59.21"
									y="0.286865"
									width="55.1512"
									height="25.9535"
									rx="2.76174"
									fill="#9374FF"
									transform="translate(-85,-35)"
								/>
								<path
									id="filledPointer"
									transform="translate(-85,-35)"
									opacity="0.8"
									d="M67.7089 15.3833C68.1703 15.3833 68.5711 15.4727 68.9114 15.6515C69.2575 15.8303 69.5228 16.0841 69.7073 16.4128C69.8919 16.7416 69.9842 17.1222 69.9842 17.5548H69.1364C69.1364 17.1107 69.0124 16.7675 68.7644 16.5253C68.5221 16.2773 68.1703 16.1533 67.7089 16.1533C67.1898 16.1533 66.7948 16.3148 66.5237 16.6378C66.2526 16.955 66.1171 17.425 66.1171 18.0479V18.8265C66.1171 19.4494 66.2497 19.9223 66.515 20.2453C66.7861 20.5625 67.1841 20.7211 67.7089 20.7211C68.2107 20.7211 68.5769 20.5971 68.8076 20.3491C69.0383 20.0953 69.1537 19.6945 69.1537 19.1466V19.0341H67.4753V18.2728H69.9842V20.2972C69.9842 20.7759 70.0015 21.145 70.0361 21.4045H69.5343C69.4593 21.1681 69.4017 20.9316 69.3613 20.6951C68.9864 21.2258 68.4356 21.4911 67.7089 21.4911C66.9418 21.4911 66.342 21.2575 65.9095 20.7903C65.4827 20.3174 65.2693 19.6628 65.2693 18.8265V18.0479C65.2693 17.2174 65.4827 16.5657 65.9095 16.0927C66.342 15.6198 66.9418 15.3833 67.7089 15.3833ZM73.2955 16.8973C73.705 16.8973 74.025 17.0299 74.2557 17.2952C74.4864 17.5548 74.6018 17.8835 74.6018 18.2815L74.5758 18.6102H73.8578V18.4199C73.8578 18.2469 73.8145 18.094 73.728 17.9614C73.6415 17.8287 73.5319 17.7278 73.3993 17.6586C73.2666 17.5836 73.134 17.5461 73.0013 17.5461C72.7245 17.5461 72.5082 17.6557 72.3525 17.8749C72.1968 18.094 72.1189 18.3911 72.1189 18.7659V21.4045H71.3057V16.9838H71.8853L72.0064 17.6413C72.041 17.5259 72.1189 17.4106 72.24 17.2952C72.3611 17.1799 72.5111 17.0847 72.6899 17.0098C72.8744 16.9348 73.0763 16.8973 73.2955 16.8973ZM77.3116 16.8973C77.9287 16.8973 78.4219 17.0876 78.791 17.4683C79.1601 17.8489 79.3447 18.3709 79.3447 19.0341V19.3542C79.3447 20.0175 79.163 20.5394 78.7996 20.9201C78.4363 21.3007 77.9403 21.4911 77.3116 21.4911C76.683 21.4911 76.187 21.3007 75.8236 20.9201C75.4603 20.5394 75.2786 20.0175 75.2786 19.3542V19.0341C75.2786 18.3709 75.4632 17.8489 75.8323 17.4683C76.2014 17.0876 76.6945 16.8973 77.3116 16.8973ZM77.3116 17.5461C76.9252 17.5461 76.6253 17.6788 76.4119 17.9441C76.1985 18.2094 76.0918 18.5987 76.0918 19.112V19.2764C76.0918 19.7781 76.1956 20.1645 76.4033 20.4356C76.6167 20.7067 76.9194 20.8422 77.3116 20.8422C77.6923 20.8422 77.9893 20.7096 78.2027 20.4443C78.4219 20.1732 78.5314 19.7839 78.5314 19.2764V19.112C78.5314 18.6102 78.4248 18.2238 78.2114 17.9527C78.0037 17.6817 77.7038 17.5461 77.3116 17.5461ZM86.6222 16.9838L85.1774 21.4045H84.3296L83.3088 18.3161H83.2742L82.2706 21.4045H81.4228L79.9694 16.9838H80.8086L81.8381 20.2193H81.8727L82.9195 16.9838H83.7154L84.7449 20.2193H84.7795L85.8263 16.9838H86.6222ZM88.4783 16.9838H89.5077V17.6326H88.4783V20.2712C88.4783 20.4789 88.5186 20.6288 88.5994 20.7211C88.6801 20.8134 88.8041 20.8595 88.9714 20.8595C89.1213 20.8595 89.3001 20.8163 89.5077 20.7298V21.3353C89.3001 21.4391 89.0319 21.4911 88.7032 21.4911C88.3629 21.4911 88.1034 21.3901 87.9246 21.1883C87.7516 20.9864 87.665 20.6663 87.665 20.228V17.6326H87.1806V16.9838H87.691L87.9678 15.5737H88.4783V16.9838ZM91.3306 17.5375C91.6939 17.1107 92.1495 16.8973 92.6975 16.8973C93.1819 16.8973 93.5626 17.0271 93.8394 17.2866C94.1162 17.5461 94.2547 17.9268 94.2547 18.4285V21.4045H93.4415V18.5756C93.4415 17.8893 93.13 17.5461 92.5071 17.5461C92.2995 17.5461 92.1063 17.6009 91.9275 17.7105C91.7487 17.8201 91.6045 17.97 91.4949 18.1604C91.3854 18.3449 91.3306 18.5497 91.3306 18.7746V21.4045H90.5174V15.1757H91.3306V17.5375Z"
									fill="white"
								/>

								<path
									id="filledPointer"
									transform="translate(-85,-35)"
									d="M83.8169 27.6273C83.5609 27.8406 83.189 27.8406 82.9329 27.6273L78.0197 23.5329C77.0275 22.7061 77.6122 21.0912 78.9037 21.0912L87.8461 21.0912C89.1376 21.0912 89.7223 22.7061 88.7301 23.5329L83.8169 27.6273Z"
									fill="#9374FF"
								/>
								<path
									id="filledPointer"
									transform="translate(-85,-35)"
									d="M70.2372 5.99695H66.9498L66.7876 8.17055C67.2562 7.80288 67.7248 7.61904 68.1934 7.61904C69.0224 7.61904 69.6352 7.84614 70.0317 8.30032C70.4283 8.7473 70.6265 9.33125 70.6265 10.0522C70.6265 10.5424 70.5184 10.9786 70.3021 11.3607C70.093 11.7356 69.7938 12.0311 69.4045 12.2474C69.0224 12.4565 68.5755 12.561 68.0636 12.561C67.5806 12.561 67.1444 12.4565 66.7551 12.2474C66.3658 12.0383 66.0594 11.75 65.8359 11.3823C65.6197 11.0146 65.5079 10.6001 65.5007 10.1387H66.5605C66.5749 10.5568 66.7227 10.9065 67.0038 11.1876C67.2922 11.4616 67.6455 11.5986 68.0636 11.5986C68.5106 11.5986 68.8711 11.458 69.145 11.1768C69.4262 10.8885 69.5667 10.5028 69.5667 10.0197C69.5667 9.58718 69.4262 9.23032 69.145 8.94916C68.8638 8.668 68.5178 8.52742 68.1069 8.52742C67.4941 8.52742 67.0291 8.77614 66.7119 9.27358L65.7602 9.133L66.063 5.03451H70.2372V5.99695ZM77.3878 5.60765C76.4938 6.66021 75.7945 7.72358 75.2899 8.79776C74.7924 9.87195 74.5437 10.9065 74.5437 11.9014V12.1501L74.5653 12.4529H73.3325C73.3325 10.4054 74.2337 8.25346 76.036 5.99695H72.1754V5.03451H77.3878V5.60765ZM84.4518 5.03451L79.9532 12.4529H79.1962L83.7165 5.03451H84.4518ZM79.7477 5.04532C80.1298 5.04532 80.4434 5.17148 80.6886 5.42381C80.9337 5.66893 81.0562 5.97893 81.0562 6.35381V7.5109C81.0562 7.88579 80.9301 8.19939 80.6777 8.45172C80.4326 8.69683 80.1226 8.81939 79.7477 8.81939H79.672C79.2972 8.81939 78.9836 8.69683 78.7312 8.45172C78.4861 8.19939 78.3636 7.88579 78.3636 7.5109V6.35381C78.3636 5.97893 78.4861 5.66893 78.7312 5.42381C78.9764 5.17148 79.29 5.04532 79.672 5.04532H79.7477ZM79.7153 5.64009C79.5134 5.64009 79.3512 5.70137 79.2287 5.82393C79.1133 5.93928 79.0557 6.09067 79.0557 6.27811V7.5866C79.0557 7.77404 79.1133 7.92904 79.2287 8.0516C79.3512 8.16695 79.5134 8.22462 79.7153 8.22462C79.9172 8.22462 80.0758 8.16695 80.1911 8.0516C80.3065 7.92904 80.3641 7.77404 80.3641 7.5866V6.27811C80.3641 6.09067 80.3065 5.93928 80.1911 5.82393C80.0758 5.70137 79.9172 5.64009 79.7153 5.64009ZM83.9652 8.68962C84.3401 8.68962 84.6501 8.81579 84.8952 9.06811C85.1475 9.31323 85.2737 9.62323 85.2737 9.99811V11.1552C85.2737 11.5301 85.1511 11.8437 84.906 12.096C84.6609 12.3411 84.3473 12.4637 83.9652 12.4637H83.8895C83.5074 12.4637 83.1938 12.3411 82.9487 12.096C82.7036 11.8437 82.581 11.5301 82.581 11.1552V9.99811C82.581 9.62323 82.7036 9.31323 82.9487 9.06811C83.201 8.81579 83.5146 8.68962 83.8895 8.68962H83.9652ZM83.9327 9.28439C83.7309 9.28439 83.5687 9.34567 83.4461 9.46823C83.3308 9.58358 83.2731 9.73497 83.2731 9.92242V11.2309C83.2731 11.4183 83.3308 11.5733 83.4461 11.6959C83.5687 11.8113 83.7309 11.8689 83.9327 11.8689C84.1346 11.8689 84.2932 11.8113 84.4086 11.6959C84.5239 11.5733 84.5816 11.4183 84.5816 11.2309V9.92242C84.5816 9.73497 84.5239 9.58358 84.4086 9.46823C84.2932 9.34567 84.1346 9.28439 83.9327 9.28439Z"
									fill="white"
								/>
								<circle
									cx="105.136"
									cy="13.7742"
									r="4.83305"
									fill="white"
									transform="translate(-85,-35)"
								/>
								<path
									transform="translate(-85,-35)"
									d="M105.49 12.5617C105.308 12.3668 104.964 12.3668 104.781 12.5617L102.972 14.4933C102.731 14.7506 102.944 15.1341 103.327 15.1341L106.944 15.1341C107.328 15.1341 107.54 14.7506 107.299 14.4933L105.49 12.5617Z"
									fill="#38E7B2"
								/>
								<circle
									cx="0"
									cy="0"
									r="2.41653"
									fill="#9374FF"
									stroke="#6241D4"
									stroke-width="0.690436"
									transform="translate(0,0)"
								/>

								<animateMotion
									fill="freeze"
									path="M0.814453 80.3175C6.21607 66.1207 12.4602 62.421 19.299 62.421C25.2458 62.421 21.3804 50.7166 26.7325 50.7166C30.3006 50.7166 34.33 54.4454 38.3288 54.4049C42.3275 54.3645 42.7888 48.2388 50.2223 48.2388C59.4409 48.2388 56.1691 28.8153 61.8186 28.8153C66.2787 28.8153 64.4946 40.2227 71.3334 40.2227C76.6856 40.2227 77.5776 31.8984 82.335 31.8984C87.9845 31.8984 84.119 45.7723 92.7419 45.7723C95.9911 45.7723 98.3913 38.9895 102.257 38.9895C106.122 38.9895 108.501 41.456 110.88 41.456C114.448 41.456 114.448 33.1316 116.232 33.1316C118.016 33.1316 119.205 34.7323 121.584 34.7323C124.214 34.7323 126.044 27.2738 132.46 27.2738C139.424 27.2738 145.651 15.2498 152.21 15.2498"
									dur="5s"
									repeatCount="indefinite"
								/>
							</g>
						</motion.g>

						<circle
							cx="0"
							cy="0"
							r="2.41653"
							fill="#9374FF"
							stroke="#6241D4"
							stroke-width="0.690436"
						>
							<animateMotion dur="5s" repeatCount="1" rotate="auto">
								<mpath href="#motionPath" />
							</animateMotion>
						</circle>
						<defs>
							<linearGradient
								id="paint0_linear_498_7167"
								x1="76.5121"
								y1="-3.96073"
								x2="76.5121"
								y2="80.3175"
								gradientUnits="userSpaceOnUse"
							>
								<stop stop-color="#9374FF" />
								<stop offset="1" stop-color="#9374FF" stop-opacity="0" />
							</linearGradient>
						</defs>
					</svg>
				</div>
			</div>
		</ScrollTrigger>
	);
};

export default CartConversion;
